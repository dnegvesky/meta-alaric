From ac93d3916f9dbfc66cb65f736bd52372c02fdce4 Mon Sep 17 00:00:00 2001
From: Dan Negvesky <dnegvesky@reflexces.com>
Date: Thu, 3 Jan 2019 17:46:09 -0500
Subject: [PATCH 1/1] add Alaric devicetree

Signed-off-by: Dan Negvesky <dnegvesky@reflexces.com>
---
 arch/arm/boot/dts/socfpga_arria10_alaric.dts | 153 +++++++++++++++++++
 1 file changed, 153 insertions(+)
 create mode 100644 arch/arm/boot/dts/socfpga_arria10_alaric.dts

diff --git a/arch/arm/boot/dts/socfpga_arria10_alaric.dts b/arch/arm/boot/dts/socfpga_arria10_alaric.dts
new file mode 100644
index 000000000000..0976c01ef031
--- /dev/null
+++ b/arch/arm/boot/dts/socfpga_arria10_alaric.dts
@@ -0,0 +1,153 @@
+/dts-v1/;
+#include "socfpga_arria10.dtsi"
+
+/ {
+	model = "Altera SOCFPGA Arria 10";
+	compatible = "altr,socfpga-arria10", "altr,socfpga";
+
+	aliases {
+		ethernet0 = &gmac1;
+		serial0 = &uart1;
+	}; //end aliases
+
+	chosen {
+		bootargs = "earlyprintk";
+		stdout-path = "serial0:115200n8";
+	}; //end chosen
+
+	memory@0 {
+		name = "memory";
+		device_type = "memory";
+		reg = <0x0 0x40000000>; /* 1GB */
+	};
+
+	soc {
+		clkmgr@ffd04000 {
+			clocks {
+				osc1 {
+					clock-frequency = <25000000>;
+				};
+			};
+		};
+	};
+
+};
+
+&gmac1 {
+	status="okay";
+	address-bits = <48>;
+	max-frame-size = <1518>;
+	local-mac-address = [00 00 00 00 00 00];
+	phy-mode = "rgmii";
+	phy-addr = <0xffffffff>;
+};
+
+&mmc {
+	fifo-depth = <1024>;
+	num-slots = <1>;
+	status = "okay";
+	bank-width = <2>;
+	device-width = <1>;
+	supports-highspeed;
+	broken-cd;
+	altr,dw-mshc-ciu-div = <3>;
+	altr,dw-mshc-sdr-timing = <0 3>;
+	clock-freq-min-max = <400000 25000000>;
+	pwr-en = <0>;
+	#address-cells = <1>;
+	#size-cells = <0>;
+	slot0: slot@0 {
+		reg = <0>;
+		bus-width = <4>;
+	}; //end slot@0 (slot0)
+};
+
+&eccmgr {
+	sdmmca-ecc@ff8c2c00 {
+		compatible = "altr,socfpga-sdmmc-ecc";
+		reg = <0xff8c2c00 0x400>;
+		altr,ecc-parent = <&mmc>;
+		interrupts = <15 IRQ_TYPE_LEVEL_HIGH>,
+			     <47 IRQ_TYPE_LEVEL_HIGH>,
+			     <16 IRQ_TYPE_LEVEL_HIGH>,
+			     <48 IRQ_TYPE_LEVEL_HIGH>;
+	};
+};
+
+
+&uart1 {
+	status = "okay";
+};
+
+&qspi {
+	reg-names = "axi_slave0", "axi_slave1";
+	bank-width = <2>;
+	device-width = <1>;
+	status = "okay";
+	flash0: n25q128a@0 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "n25q128a11";
+		reg = <0>;
+		spi-max-frequency = <50000000>;
+		m25p,fast-read;
+		page-size = <256>;
+		block-size = <16>;
+		read-delay = <3>;
+		tshsl-ns = <200>;
+		tsd2d-ns = <255>;
+		tchsh-ns = <20>;
+		tslch-ns = <20>;
+		cdns,page-size = <256>;
+		cdns,block-size = <16>;
+		cdns,read-delay = <3>;
+		cdns,tshsl-ns = <200>;
+		cdns,tsd2d-ns = <255>;
+		cdns,tchsh-ns = <20>;
+		cdns,tslch-ns = <20>;
+
+		part0: partition@0 {
+			label = "Boot and FPGA data";
+			reg = <0x00000000 0x00720000>;
+		}; //end partition@0 (part0)
+
+		part1: partition@800000 {
+			label = "Root Filesystem - JFFS2";
+			reg = <0x00800000 0x008e0000>;
+		}; //end partition@800000 (part1)
+	}; //end n25q128a@0 (flash0)
+};
+
+&usb1 {
+	status = "okay";
+};
+
+&spi1 {
+	status = "okay";
+
+	resource-manager@0 {
+		compatible = "altr,a10sr";
+		reg = <0>;
+		spi-max-frequency = <100000>;
+		/* low-level active IRQ at GPIO1_5 */
+		interrupt-parent = <&portb>;
+		interrupts = <5 IRQ_TYPE_LEVEL_LOW>;
+		interrupt-controller;
+		#interrupt-cells = <2>;
+
+		a10sr_gpio: gpio-controller {
+			compatible = "altr,a10sr-gpio";
+			gpio-controller;
+			#gpio-cells = <2>;
+		};
+
+		a10sr_rst: reset-controller {
+			compatible = "altr,a10sr-reset";
+			#reset-cells = <1>;
+		};
+
+		ps_alarm {
+			compatible = "altr,a10sr-hwmon";
+		};
+	};
+};
-- 
2.17.1

